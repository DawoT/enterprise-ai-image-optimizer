# ===========================================
# Enterprise AI Image Optimizer - Environment Variables
# ===========================================
# IMPORTANT: Copy this file to .env.local and fill in the values
# DO NOT commit .env.local to version control
# ===========================================

# Application
NODE_ENV=development
APP_URL=http://localhost:3000
APP_NAME="Enterprise AI Image Optimizer"

# ===========================================
# Database (PostgreSQL) - REQUERIDO
# ===========================================
# Formato: postgresql://user:password@host:port/database?schema=public
DATABASE_URL="postgresql://postgres:postgres@localhost:5432/enterprise_ai_image_optimizer?schema=public"

# ===========================================
# Redis (for BullMQ Queue) - REQUERIDO
# ===========================================
# Formato: redis://[:password@]host:port[/db]
REDIS_URL="redis://localhost:6379"
REDIS_PASSWORD=redis_password

# Configuración adicional de Redis
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0

# ===========================================
# MinIO/S3 Storage Configuration
# ===========================================
# Endpoint interno (para comunicación Docker entre contenedores)
STORAGE_ENDPOINT=http://minio:9000

# Endpoint público (para acceso desde navegador/externo)
STORAGE_PUBLIC_URL=http://localhost:9000

STORAGE_REGION=us-east-1
STORAGE_ACCESS_KEY_ID=minioadmin
STORAGE_SECRET_ACCESS_KEY=minioadmin
STORAGE_BUCKET=images
STORAGE_FORCE_PATH_STYLE=true

# Puerto para MinIO Console UI
MINIO_API_PORT=9000
MINIO_CONSOLE_PORT=9001

# ===========================================
# Worker Configuration
# ===========================================
# Concurrency: número de trabajos simultáneos
WORKER_CONCURRENCY=2
# Ejecutar worker en proceso separado (true) o junto con la app (false)
RUN_WORKER_SEPARATELY=false

# ===========================================
# Google Drive Integration
# ===========================================
# OAuth 2.0 Client ID from Google Cloud Console
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
# Redirect URI for OAuth callback
GOOGLE_REDIRECT_URI=http://localhost:3000/api/auth/callback/google
# Folder ID in Google Drive to monitor for new images
GOOGLE_DRIVE_FOLDER_ID=your-folder-id
# Credentials JSON file path (for service account)
GOOGLE_APPLICATION_CREDENTIALS=./credentials/google-drive-credentials.json

# ===========================================
# Nano Banana Pro / Gemini AI API
# ===========================================
# Get from Google AI Studio: https://aistudio.google.com/
GEMINI_API_KEY=your-gemini-api-key
GEMINI_MODEL=gemini-1.5-pro
GEMINI_API_URL=https://generativelanguage.googleapis.com/v1beta/models

# AI Configuration
AI_MAX_TOKENS=2048
AI_TEMPERATURE=0.1
AI_TOP_P=0.8
AI_TOP_K=40

# ===========================================
# Storage Configuration (Legacy/AWS S3)
# ===========================================
# AWS S3 Configuration (for production storage with AWS)
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_REGION=us-east-1
AWS_S3_BUCKET=enterprise-ai-image-optimizer
AWS_CLOUDFRONT_URL=https://your-cloudfront-distribution.cloudfront.net

# Local Storage (fallback when S3 is not configured)
LOCAL_STORAGE_PATH=./storage
LOCAL_UPLOAD_DIR=./storage/uploads
LOCAL_PROCESSED_DIR=./storage/processed

# ===========================================
# Authentication (NextAuth.js)
# ===========================================
# Generate with: openssl rand -base64 32
NEXTAUTH_SECRET=your-auth-secret-key-min-32-chars
# Admin credentials for self-hosted authentication
ADMIN_USER=admin
ADMIN_PASSWORD=admin

# Rate limiting
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW_MS=60000
# Session configuration
SESSION_MAX_AGE=86400

# ===========================================
# Logging & Observability
# ===========================================
LOG_LEVEL=info
LOG_FORMAT=json
# Optional: Datadog integration
DD_AGENT_HOST=localhost
DD_TRACE_AGENT_PORT=8126
DD_LOGS_AGENT_PORT=8126
DD_SERVICE=enterprise-ai-image-optimizer
DD_VERSION=1.0.0
DD_ENV=development

# ===========================================
# Feature Flags
# ===========================================
FEATURE_AI_ENABLED=true
FEATURE_GOOGLE_DRIVE_ENABLED=false
FEATURE_S3_STORAGE_ENABLED=true
FEATURE_MINIO_ENABLED=true
FEATURE_MONITORING_ENABLED=true
FEATURE_QUEUE_ENABLED=true

# ===========================================
# Performance
# ===========================================
# Image processing concurrency
MAX_CONCURRENT_JOBS=4
# Maximum file sizes (in bytes)
MAX_UPLOAD_SIZE=52428800
MAX_FILE_SIZE=52428800
# Processing timeout (in milliseconds)
PROCESSING_TIMEOUT_MS=300000

# ===========================================
# Email Notifications (Optional)
# ===========================================
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=your-smtp-user
SMTP_PASSWORD=your-smtp-password
FROM_EMAIL=noreply@yourdomain.com

# ===========================================
# Testing
# ===========================================
# Use in-memory implementations instead of real services
TEST_MODE=false
